<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <div>
            <uib-accordion close-others="oneAtATime">
                <form name="form" novalidate role="form">
                    <div uib-accordion-group class="panel-default" is-open="vm.isOpen">
                        <uib-accordion-heading>
                            {{'Settings.security.email.title' | translate}}
                            <i class="pull-right glyphicon"
                               ng-class="{'glyphicon-chevron-down': status.open,
                               'glyphicon-chevron-right': !status.open}">
                            </i>
                        </uib-accordion-heading>
                        <div class="form-group"
                             ng-class="{
                                'has-error': form.newEmail.$invalid && form.newEmail.$dirty,
                                'has-success': form.newEmail.$valid}">
                            <label class="required" for="newEmail">{{'Settings.security.form.newEmail' |
                                translate}}</label>
                            <input type="email"
                                   class="form-control"
                                   name="newEmail"
                                   id="newEmail"
                                   ng-model="vm.securitySettings.newEmail"
                                   ng-maxlength="50"
                                   required/>

                            <p class="help-block" ng-if="form.newEmail.$invalid && form.newEmail.$dirty">
                                {{'Settings.security.form.wrongEmail' | translate}}
                            </p>
                        </div>

                        <div class="form-group"
                             ng-class="{
                                'has-error': form.userPassword.$invalid && form.userPassword.$dirty,
                                'has-success': form.userPassword.$valid}">
                            <label class="required" for="userPassword">{{'Settings.security.form.password' |
                                translate}}</label>
                            <input type="password"
                                   class="form-control"
                                   name="userPassword"
                                   id="userPassword"
                                   ng-model="vm.securitySettings.userPassword"
                                   ng-minLength="8"
                                   ng-maxLength="25"
                                   required/>

                            <p class="help-block" ng-if="form.userPassword.$invalid && form.userPassword.$dirty">
                                {{'Settings.security.form.errorPassword' | translate}}
                            </p>
                        </div>

                        <div>
                            <button ng-click="vm.changeEmailRequest()"
                                    type="submit"
                                    ng-disabled="form.$invalid"
                                    class="btn btn-primary">
                                <span ng-show="!vm.dataLoading">{{"Settings.security.form.btn.saveChanges"|translate}}</span>
                                <span ng-show="vm.dataLoading">{{"Settings.security.form.btn.loading"|translate}}</span>
                                <i ng-show="vm.dataLoading" class="fa fa-spinner fa-pulse"></i>
                            </button>

                            <a ui-sref="home" class="btn btn-link">{{"Settings.security.form.btn.cancel"|translate}}</a>
                        </div>
                    </div>
                </form>
            </uib-accordion>
        </div>
    </div>
</div>