<div class="col-md-8 col-md-offset-2">
    <fieldset>
        <legend>
            <h2>{{"UserSettings.personal.title"|translate}}</h2>
        </legend>
    </fieldset>
    <div class="row">
        <form name="userSettings" novalidate>
            <uib-accordion close-others="true">
                <div uib-accordion-group class="panel panel-primary" is-open="vm.isOpened">
                    <uib-accordion-heading>
                        {{'UserSettings.personal.settings.general' | translate}}
                        <i class="pull-right fa fa-chevron-down"
                           ng-class="{'open' : vm.isOpened}">
                        </i>
                    </uib-accordion-heading>
                    <div class="form-group"
                         ng-class="{
                    'has-error': userSettings.firstName.$invalid && userSettings.firstName.$dirty,
                    'has-success': userSettings.firstName.$valid }">
                        <label for="firstName">{{'UserSettings.personal.form.firstName' | translate}}</label>
                        <input
                                class="form-control"
                                name="firstName"
                                id="firstName"
                                ng-model=" vm.userProfile.firstName"
                                ng-minLength="3"
                                ng-maxLength="50"
                                required/>

                        <p class="help-block" ng-if="userSettings.firstName.$invalid && userSettings.firstName.$dirty">
                            {{'UserSettings.personal.form.inputFieldError' | translate : '{ fieldName: "First name", minLength : "3", maxLength: "50"}'}}
                        </p>
                    </div>

                    <div class="form-group"
                         ng-class="{
                    'has-error': userSettings.lastName.$invalid && userSettings.lastName.$dirty,
                    'has-success': userSettings.lastName.$valid }">
                        <label for="lastName">{{'UserSettings.personal.form.lastName' | translate}}</label>
                        <input
                                class="form-control"
                                name="lastName"
                                id="lastName"
                                ng-model=" vm.userProfile.lastName"
                                ng-minLength="3"
                                ng-maxLength="50"
                                required/>

                        <p class="help-block" ng-if="userSettings.lastName.$invalid && userSettings.lastName.$dirty">
                            {{'UserSettings.personal.form.inputFieldError' | translate: '{ minLength : "3", maxLength: "50"}'}}
                        </p>
                    </div>

                    <div class="form-group">
                        <div ng-class="{
                    'has-error': userSettings.gender.$invalid,
                    'has-success': userSettings.gender.$valid }">
                            <label class="required" for="gender">{{"UserSettings.form.gender"|translate}}</label>
                            <select
                                    name="gender"
                                    ng-options="gender.id as gender.description for gender in vm.gender"
                                    id="gender"
                                    class="form-control"
                                    ng-model="vm.userProfile.genderId"
                                    required>
                                <option value="" selected>{{gender.description}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div ng-class="{
                    'has-error': userSettings.country.$invalid,
                    'has-success': userSettings.country.$valid }">
                            <label class="required" for="country">{{"UserSettings.form.country"|translate}}</label>
                            <select
                                    name="country"
                                    ng-options="country.id as country.description for country in vm.country"
                                    id="country"
                                    class="form-control"
                                    ng-model="vm.userProfile.countryId"
                                    required>
                                <option value="" selected>{{country.description}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div ng-class="{
                    'has-error': userSettings.city.$invalid,
                    'has-success': userSettings.city.$valid }">
                            <label class="required" for="city">{{"UserSettings.form.city"|translate}}</label>
                            <select
                                    name="city"
                                    ng-options="city.id as city.description for city in vm.cities"
                                    id="city"
                                    class="form-control"
                                    ng-model="vm.userProfile.cityId"
                                    required>
                                <option value="" selected>{{city.description}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <div ng-class="{
                    'has-error': userSettings.dateOfBirth.$invalid,
                    'has-success': userSettings.dateOfBirth.$valid }">
                            <label class="required" for="dateOfBirth">{{"UserSettings.form.dateOfBirth"|translate}}</label>
                            <input
                                    type="date"
                                    name="dateOfBirth"
                                    value="{{vm.userProfile.dateOfBirth | date:'yyyy-MM-dd'}}"
                                    id="dateOfBirth"
                                    class="form-control"
                                    ng-model="vm.userProfile.dateOfBirth"
                                    required>
                            </input>
                        </div>
                    </div>
                </div>
                <div uib-accordion-group class="panel panel-primary">
                    <uib-accordion-heading>
                        {{'UserSettings.personal.settings.additional' | translate}}
                        <i class="pull-right fa fa-chevron-down"
                           ng-class="{'open' : !vm.isOpened}">
                        </i>
                    </uib-accordion-heading>
                    <div class="form-group">
                        <label for="facebook">{{"UserSettings.form.facebook"|translate}}</label>
                        <input type="text"
                               name="facebook"
                               id="facebook"
                               class="form-control "
                               ng-model="vm.userProfile.facebookLink"/>
                    </div>

                    <div class="form-group">
                        <label for="profession">{{"UserSettings.form.profession"|translate}}</label>
                        <input type="text"
                               name="profession"
                               id="profession"
                               class="form-control "
                               ng-model="vm.userProfile.profession"/>
                    </div>

                    <div class="form-group">
                        <label for="company">{{"UserSettings.form.company"|translate}}</label>
                        <input type="text"
                               name="company"
                               id="company"
                               class="form-control "
                               ng-model="vm.userProfile.company"/>
                    </div>

                    <div class="form-group">
                        <label for="phoneNumber">{{"UserSettings.form.phoneNumber"|translate}}</label>
                        <input type="text"
                               name="phoneNumber"
                               id="phoneNumber"
                               class="form-control "
                               ng-model="vm.userProfile.phoneNumber"/>
                    </div>
                </div>

                <br>

                <button ng-click="vm.submitChanges()"
                        type="submit"
                        ng-disabled="userSettings.gender.$invalid || userSettings.city.$invalid || userSettings.country.$invalid
                    || userSettings.firstName.$invalid || userSettings.lastName.$invalid"
                        class="btn btn-success pull-right">
                    {{"UserSettings.btn.submit" | translate}}
                    <i ng-show="vm.dataLoading" class="fa fa-spinner fa-pulse"></i>
                </button>
            </uib-accordion>
        </form>
    </div>
</div>